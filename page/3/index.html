<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.1.1">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha256-yIDrPSXHZdOZhAqiBP7CKzIwMQmRCJ8UeB8Jo17YC4o=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.dujiajun.site","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.19.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="一无是处杜某某">
<meta property="og:url" content="http://blog.dujiajun.site/page/3/index.html">
<meta property="og:site_name" content="一无是处杜某某">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="杜某某">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://blog.dujiajun.site/page/3/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/3/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>一无是处杜某某</title>
  

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?34f7210ec82752a9bbc5d28884db07fb"></script>







  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">一无是处杜某某</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">或许是东川路第一老实人</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">杜某某</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">39</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://blog.dujiajun.site/2019/03/06/%E5%A4%A7%E4%B8%89%E4%B8%8A%E5%AD%A6%E6%9C%9F%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="杜某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一无是处杜某某">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 一无是处杜某某">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/03/06/%E5%A4%A7%E4%B8%89%E4%B8%8A%E5%AD%A6%E6%9C%9F%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">大三上学期总结</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-03-06 13:18:40" itemprop="dateCreated datePublished" datetime="2019-03-06T13:18:40+08:00">2019-03-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>时光飞逝，转眼已是2019年。在交大已经生活学习了近3年的我，已经开始面对未来的选择了。大三上这一学期经历了很多事情，做了许多工作，也有许多不足的反思，值得细细总结。新的一学期已经开始，面对未来的发展方向，我需要有一些计划，并为之付出行动了。</p>
<p>整个学期，对于必修课而言，脱离了基础课的学习，进入了专业课的学习，我需要适应各课程老师的风格与节奏。对于某些课程，我很好地跟随老师的教学，最终取得了高分。而对于另外一些课程，自己没能妥善安排，加上长期存在的“数学恐惧症”，没能拿到高分。除此之外，凭借着选课系统对于高年级的优先级，在必修课以外，我相较于前几学期，更多地按照兴趣选择了一些课程。这些选修课对我一些技能和视野的开阔还是取得了比较好的效果。</p>
<p>在其他方面，我比较喜欢数学建模比赛，因此积极地参加了国赛、美赛，都有精心准备并参与其中。另外，由于我比较喜欢水群，经常活跃在新生群里面，我担任了生活园区C++学业辅导员。别人看来或许会很费时间，然而对我而言，我觉得这种事情却能给我带来存在感和满足感。</p>
<p>对于课程学业而言，或许我是一直以来就存在着只盯着平均分看，对自己要求不高，期望值较低这种问题，因此最终的成绩反映出来也就仅仅对得上这种低要求。回想大一大二的时候，对待课程基本上就是完成作业，然后期末前简单复习一下就完事。这种状态一直持续下来，每学期面对相比于上学期都在增加的学积分沾沾自喜，至于当我面对排名的时候，却发现虽然大家都在进步，但是同学们的进步幅度比我大很多。</p>
<p>在新的学期里面，首先我要做的事情是继续提高课业成绩，圆满完成这学期的必修课任务。这方面主要需要合理安排时间，紧凑而不失节奏地安排好课程。另外还要在课余时间进行项目的准备，自我探索的实践。而且这学期前半学期的时间相当充裕，而后半学期的时间比较紧张。对于我来说，常常会在时间宽松充裕的时候白白浪费时间。因此，不浪费时间也是一个巨大的挑战。</p>
<p>我希望，当我在本学期结束的时候，各方面都能达到自己设定的目标，各项决定都不留下遗憾。这个希望听起来简单，但是实施起来却不是那么容易。不管怎么样，我还是拭目以待吧。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://blog.dujiajun.site/2019/01/11/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E8%AF%BE%E7%A8%8B%E5%AE%9E%E8%B7%B51%E6%8A%A5%E5%91%8A/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="杜某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一无是处杜某某">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 一无是处杜某某">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/01/11/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E8%AF%BE%E7%A8%8B%E5%AE%9E%E8%B7%B51%E6%8A%A5%E5%91%8A/" class="post-title-link" itemprop="url">编译原理课程实践1报告</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-01-11 14:12:33" itemprop="dateCreated datePublished" datetime="2019-01-11T14:12:33+08:00">2019-01-11</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="一、环境"><a href="#一、环境" class="headerlink" title="一、环境"></a>一、环境</h2><table>
<thead>
<tr>
<th align="center">项目</th>
<th align="center">内容</th>
</tr>
</thead>
<tbody><tr>
<td align="center">系统</td>
<td align="center">Ubuntu 18.04 (Windows Subsystem for Linux), Windows 10 Home, version 1809</td>
</tr>
<tr>
<td align="center">GCC</td>
<td align="center">Ubuntu 7.3.0-27ubuntu1~18.04</td>
</tr>
<tr>
<td align="center">Python</td>
<td align="center">Python 2.7.15 [GCC 7.3.0] :: Anaconda, Inc. on linux2</td>
</tr>
<tr>
<td align="center">flex</td>
<td align="center">flex 2.6.4</td>
</tr>
</tbody></table>
<h2 id="二、功能实现"><a href="#二、功能实现" class="headerlink" title="二、功能实现"></a>二、功能实现</h2><h3 id="1、指数转换"><a href="#1、指数转换" class="headerlink" title="1、指数转换"></a>1、指数转换</h3><p>首先，分析Python中指数的可能形式。</p>
<p>由于题目中的Python 版本为2.7，通过查询Python 2.7相关文档（ <a target="_blank" rel="noopener" href="https://docs.python.org/2.7/reference/lexical_analysis.html">https://docs.python.org/2.7/reference/lexical_analysis.html</a> ），获得浮点数的相关词法定义。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">floatnumber   ::=  pointfloat | exponentfloat</span><br><span class="line">pointfloat    ::=  [intpart] fraction | intpart &quot;.&quot;</span><br><span class="line">exponentfloat ::=  (intpart | pointfloat) exponent</span><br><span class="line">intpart       ::=  digit+</span><br><span class="line">fraction      ::=  &quot;.&quot; digit+</span><br><span class="line">exponent      ::=  (&quot;e&quot; | &quot;E&quot;) [&quot;+&quot; | &quot;-&quot;] digit+</span><br></pre></td></tr></table></figure>

<p>如下为一些浮点数的形式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3.14    10.    .001    1e100    3.14e-10    0e0</span><br></pre></td></tr></table></figure>

<p>可以看出，Python中指数的形式可以描述为：<code>(整数部分|浮点数)(e|E)[-+]?整数部分</code>。其中，整数部分允许前导<code>0</code>，浮点数允许省略<code>0.X</code>开头的<code>0</code>和<code>	X.0</code>结尾的<code>0</code>，<code>e</code>可以为大写也可以为小写，<code>e</code>之后可以或者省略紧跟<code>+</code>和<code>-</code>表示指数次数的正负，而后的次数只能为整数，整个数字中间不存在空格。</p>
<p>下面给出单个数字、整数部分、浮点数和指数在<code>LEX</code>中的规则：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">digit [0-9]</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">intpart &#123;digit&#125;+</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pointfloat (&#123;intpart&#125;?[.]&#123;intpart&#125;)|(&#123;intpart&#125;[.])</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exponentfloat (&#123;intpart&#125;|&#123;pointfloat&#125;)(e|E)([-+]?)&#123;intpart&#125;</span><br></pre></td></tr></table></figure>

<p>当匹配到<code>exponentfloat</code>时，将其转换为小数并写入输出流。下面给出匹配到<code>exponentfloat</code>时的程序操作：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;exponentfloat&#125; &#123;</span><br><span class="line">    <span class="type">int</span> precision = <span class="number">0</span>;</span><br><span class="line">    <span class="type">double</span> decimal = str2double(yytext, <span class="number">0</span>, yyleng, &amp;precision);</span><br><span class="line">    printByPrecision(decimal, precision);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>str2double</code>是把字符串中<code>st</code>到<code>ed</code>范围内的子串转换成浮点数并返回其小数位数的函数。函数原型如下，具体实现见附录：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">double</span> <span class="title function_">str2double</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *str, <span class="type">int</span> st, <span class="type">int</span> ed, <span class="type">int</span> * precision)</span>;</span><br></pre></td></tr></table></figure>

<p><code>printByPrecision</code>是给出浮点数及其精度，去掉小数点后多余的0后输出的函数，最少有一位小数。函数定义如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">printByPrecision</span><span class="params">(<span class="type">double</span> x, <span class="type">int</span> precision)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> buffer[<span class="number">20</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="built_in">sprintf</span>(buffer, <span class="string">&quot;%.*lf&quot;</span>, precision, x);</span><br><span class="line">    <span class="type">int</span> len = <span class="built_in">strlen</span>(buffer);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (buffer[i] == <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">            precision--;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (precision == <span class="number">0</span>)</span><br><span class="line">        precision++;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%.*lf&quot;</span>, precision, x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将程序作用到题目所给的<code>test.py</code>，执行结果如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; flex flex.l</span><br><span class="line">&gt; gcc lex.yy.c -lfl</span><br><span class="line">&gt; ./a.out &lt;test.py &gt;result.py</span><br><span class="line">&gt; python ./test.py</span><br><span class="line">10000000000.0 0.05 579 3399.95 45.73</span><br><span class="line">&gt; python ./result.py</span><br><span class="line">10000000000.0 0.05 579 3399.95 45.73</span><br></pre></td></tr></table></figure>

<p><code>result.py</code>内容如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python </span></span><br><span class="line">      </span><br><span class="line"><span class="keyword">def</span>  <span class="title function_">main</span>():</span><br><span class="line">    a = <span class="number">10000000000.0</span></span><br><span class="line">    b = <span class="number">0.05</span></span><br><span class="line">    c = <span class="number">123</span>+<span class="number">456</span></span><br><span class="line">    d = <span class="number">3400.0</span>-<span class="number">0.05</span></span><br><span class="line">    e = <span class="number">34</span>+<span class="number">800.0</span>+<span class="number">0.73</span>-<span class="number">789</span></span><br><span class="line">    <span class="built_in">print</span> a,b,c,d,e</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>   __name__  ==  <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()  </span><br></pre></td></tr></table></figure>

<h3 id="2、加减法计算"><a href="#2、加减法计算" class="headerlink" title="2、加减法计算"></a>2、加减法计算</h3><p>在上一问的基础上，只需要识别加减表达式即可。在这里我考虑了变量与常量混合的情况，并且忽略<code>+-</code>连续出现而没有运算数的情况。</p>
<p>在只考虑十进制的情况下，表达式可以用描述为，以<code>-+</code>符号或者<code>-+</code>符号连接上数字或者变量开头，随后紧跟0个或者若干个由<code>-+</code>符号连接上数字或者变量的算式。在<code>LEX</code>中的规则可以定义为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">decimalinteger ([1-9][0-9]*)|0</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numeric &#123;decimalinteger&#125;|&#123;pointfloat&#125;|&#123;exponentfloat&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alphabet [a-zA-Z]</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">variable (&#123;alphabet&#125;|_)+(&#123;numeric&#125;|&#123;alphabet&#125;|_)*</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expression [-+]?(&#123;numeric&#125;|&#123;variable&#125;)([-+](&#123;numeric&#125;|&#123;variable&#125;))*</span><br></pre></td></tr></table></figure>

<p>当匹配到<code>expression</code>时，需要将其计算出结果，并写入到输出流中。考虑到实际代码中整数和浮点数的内存占用不同，这里需要将整数与浮点数区别开考虑。表达式参与计算的值如果全部为整数，得到的结果也应该是整数，如果有浮点数参与运算，那么结果就应该是浮点数。对于整数，这里假设其范围在<code>-2147483648~2147483647</code>之间，即C语言中<code>int</code>类型的范围。</p>
<p>下面给出匹配到<code>expression</code>时的程序操作：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">&#123;expression&#125; &#123;</span><br><span class="line">    <span class="type">int</span> st = <span class="number">0</span>, flag = <span class="number">1</span>; <span class="comment">//st：当前数字的在字符串中开始的位置，flag：需要加还是减</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> hasVar = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//判断是否有变量</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; yyleng; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> ((yytext[i] == <span class="string">&#x27;+&#x27;</span> || yytext[i] == <span class="string">&#x27;-&#x27;</span>) &amp;&amp; !(yytext[i + <span class="number">1</span>] &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; yytext[i + <span class="number">1</span>] &lt;= <span class="string">&#x27;9&#x27;</span> || yytext[i + <span class="number">1</span>] == <span class="string">&#x27;.&#x27;</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            ECHO;</span><br><span class="line">            hasVar = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!hasVar)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> isfloat = <span class="number">0</span>; <span class="comment">//是否作为浮点数进行计算</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; yyleng; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (yytext[i] == <span class="string">&#x27;.&#x27;</span> || yytext[i] == <span class="string">&#x27;e&#x27;</span> || yytext[i] == <span class="string">&#x27;E&#x27;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                isfloat = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (isfloat)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> maxprecision = <span class="number">0</span>, precision = <span class="number">0</span>;</span><br><span class="line">            <span class="type">double</span> sum = <span class="number">0</span>; <span class="comment">//运算结果</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; yyleng; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//遇到+-号就可以判断数字的起止位置</span></span><br><span class="line">                <span class="keyword">if</span> (yytext[i] == <span class="string">&#x27;+&#x27;</span> || yytext[i] == <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//如果是第一个符号，那么不进行计算，只更改符号</span></span><br><span class="line">                    <span class="keyword">if</span> (i == <span class="number">0</span>)</span><br><span class="line">                    &#123;</span><br><span class="line">                        flag = (yytext[i] == <span class="string">&#x27;+&#x27;</span>) ? <span class="number">1</span> : <span class="number">-1</span>;</span><br><span class="line">                        st = i + <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//如果前面不是E，那么进行计算，如果是E的话，认为是数字的一部分，交给str2double处理</span></span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span> (yytext[i - <span class="number">1</span>] != <span class="string">&#x27;E&#x27;</span> &amp;&amp; yytext[i - <span class="number">1</span>] != <span class="string">&#x27;e&#x27;</span>)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="type">double</span> tmp = str2double(yytext, st, i, &amp;precision);</span><br><span class="line">                        <span class="keyword">if</span> (precision &gt; maxprecision)</span><br><span class="line">                            maxprecision = precision;</span><br><span class="line">                        sum += tmp * flag;</span><br><span class="line">                        flag = (yytext[i] == <span class="string">&#x27;+&#x27;</span>) ? <span class="number">1</span> : <span class="number">-1</span>;</span><br><span class="line">                        st = i + <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//遇到匹配末尾</span></span><br><span class="line">                <span class="keyword">if</span> (i == yyleng - <span class="number">1</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="type">double</span> tmp = str2double(yytext, st, yyleng, &amp;precision);</span><br><span class="line">                    <span class="keyword">if</span> (precision &gt; maxprecision)</span><br><span class="line">                        maxprecision = precision;</span><br><span class="line">                    sum += tmp * flag;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            printByPrecision(sum, maxprecision);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> sum = <span class="number">0</span>; <span class="comment">//运算结果</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; yyleng; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//遇到+-号就可以判断数字的起止位置</span></span><br><span class="line">                <span class="keyword">if</span> (yytext[i] == <span class="string">&#x27;+&#x27;</span> || yytext[i] == <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//如果不是第一个符号，进行计算</span></span><br><span class="line">                    <span class="keyword">if</span> (i != <span class="number">0</span>)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="type">int</span> tmp = str2int(yytext, st, i);</span><br><span class="line">                        sum += tmp * flag;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//整数情况下不存在E</span></span><br><span class="line">                    flag = (yytext[i] == <span class="string">&#x27;+&#x27;</span>) ? <span class="number">1</span> : <span class="number">-1</span>;</span><br><span class="line">                    st = i + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//遇到匹配末尾了</span></span><br><span class="line">                <span class="keyword">if</span> (i == yyleng - <span class="number">1</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="type">int</span> tmp = str2int(yytext, st, yyleng);</span><br><span class="line">                    sum += tmp * flag;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, sum);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;             </span><br></pre></td></tr></table></figure>

<p><code>str2int</code>是把字符串中<code>st</code>到<code>ed</code>范围内的子串转换成整数的函数。函数原型如下，具体实现见附录：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">str2int</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *str, <span class="type">int</span> st, <span class="type">int</span> ed)</span>;</span><br></pre></td></tr></table></figure>

<p>将程序作用到题目所给的<code>test.py</code>，执行结果如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; flex flex.l</span><br><span class="line">&gt; gcc lex.yy.c -lfl</span><br><span class="line">&gt; ./a.out &lt;test.py &gt;result.py</span><br><span class="line">&gt; python ./test.py</span><br><span class="line">10000000000.0 0.05 579 3399.95 45.73</span><br><span class="line">&gt; python ./result.py</span><br><span class="line">10000000000.0 0.05 579 3399.95 45.73</span><br></pre></td></tr></table></figure>

<p><code>result.py</code>内容如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python </span></span><br><span class="line">      </span><br><span class="line"><span class="keyword">def</span>  <span class="title function_">main</span>():</span><br><span class="line">    a = <span class="number">10000000000.0</span></span><br><span class="line">    b = <span class="number">0.05</span></span><br><span class="line">    c = <span class="number">579</span></span><br><span class="line">    d = <span class="number">3399.95</span></span><br><span class="line">    e = <span class="number">45.73</span></span><br><span class="line">    <span class="built_in">print</span> a,b,c,d,e</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>   __name__  ==  <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()  </span><br></pre></td></tr></table></figure>

<h3 id="3、更多case"><a href="#3、更多case" class="headerlink" title="3、更多case"></a>3、更多case</h3><p>下面是一个考虑了更多情况的测试文件<code>test2.py</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python </span></span><br><span class="line">      </span><br><span class="line"><span class="keyword">def</span>  <span class="title function_">main</span>():</span><br><span class="line">    a = <span class="number">1e+2</span>+<span class="number">3</span></span><br><span class="line">    b = <span class="number">.53e3</span>+<span class="number">100.</span></span><br><span class="line">    c = <span class="number">1</span>+<span class="number">2</span>+a</span><br><span class="line">    d = +<span class="number">1</span>+<span class="number">2</span>+<span class="number">3</span>-<span class="number">4</span>-<span class="number">2e-1</span></span><br><span class="line">    e = a+<span class="number">3</span>+b+<span class="number">1e5</span></span><br><span class="line">    <span class="built_in">print</span> <span class="number">1</span>+<span class="number">5</span></span><br><span class="line">    <span class="built_in">print</span> a,b,c,d,e</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>   __name__  ==  <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()  </span><br></pre></td></tr></table></figure>

<p>终端中执行结果如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; flex flex.l</span><br><span class="line">&gt; gcc lex.yy.c -lfl</span><br><span class="line">&gt; ./a.out &lt;test2.py &gt;result2.py</span><br><span class="line">&gt; python ./test2.py</span><br><span class="line">6</span><br><span class="line">103.0 630.0 106.0 1.8 100736.0</span><br><span class="line">&gt; python ./result2.py</span><br><span class="line">6</span><br><span class="line">103.0 630.0 106.0 1.8 100736.0</span><br></pre></td></tr></table></figure>

<p><code>result2.py</code>内容如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python </span></span><br><span class="line">      </span><br><span class="line"><span class="keyword">def</span>  <span class="title function_">main</span>():</span><br><span class="line">    a = <span class="number">103.0</span></span><br><span class="line">    b = <span class="number">630.0</span></span><br><span class="line">    c = <span class="number">1</span>+<span class="number">2</span>+a</span><br><span class="line">    d = <span class="number">1.8</span></span><br><span class="line">    e = a+<span class="number">3</span>+b+<span class="number">1e5</span></span><br><span class="line">    <span class="built_in">print</span> <span class="number">6</span></span><br><span class="line">    <span class="built_in">print</span> a,b,c,d,e</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>   __name__  ==  <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()  </span><br></pre></td></tr></table></figure>

<h2 id="三、感想"><a href="#三、感想" class="headerlink" title="三、感想"></a>三、感想</h2><p>本次大作业利用<code>LEX</code>进行代码预处理。在实际操作中我先是简单的执行了书上给出的样例，观察了输出和匹配串的行为，然后再设计题目要求的功能。在处理浮点数时，最开始考虑的是在Python中进行尝试，然后总结出指数的正规式，基于自己总结的正规式完成了整个功能。后来在和同学交流中发现Python官网的文档里面有写指数的词法定义，于是对规则进行了完善。</p>
<p>在我的代码中，我对输入做了一定的假设。比如，假设输入的整数只能是C语言<code>int</code>类型的范围，不支持输入<code>l</code>表示长整型等。在输出的时候，由于<code>double</code>的精度问题，输出的小数默认都是6位，而题目样例中给的输出参考是1位或者2位的自适应长度。为了解决这个问题，特意在提取数值的时候求出浮点数的小数位数，并在表达式中取最大的一个精度，然后利用这个精度将求出的结果重新转换为字符串，最后删去末尾多余的0即可。</p>
<h2 id="附：完整的flex-l代码"><a href="#附：完整的flex-l代码" class="headerlink" title="附：完整的flex.l代码"></a>附：完整的flex.l代码</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br></pre></td><td class="code"><pre><span class="line">%&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">str2int</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *str, <span class="type">int</span> st, <span class="type">int</span> ed)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> num = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> base = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = st; i &lt; ed; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        num = num * base + str[i] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">double</span> <span class="title function_">str2double</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *str, <span class="type">int</span> st, <span class="type">int</span> ed, <span class="type">int</span> *precision)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> isfloat = <span class="number">0</span>; <span class="comment">//是否作为浮点数进行计算</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = st; i &lt; ed; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (str[i] == <span class="string">&#x27;.&#x27;</span> || str[i] == <span class="string">&#x27;e&#x27;</span> || str[i] == <span class="string">&#x27;E&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            isfloat = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!isfloat)</span><br><span class="line">    &#123;</span><br><span class="line">        *precision = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> str2int(str, st, ed);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">double</span> num1 = <span class="number">0</span>;          <span class="comment">//e之前的数值</span></span><br><span class="line">    <span class="type">int</span> num2 = <span class="number">0</span>;             <span class="comment">//e之后的数值</span></span><br><span class="line">    <span class="type">int</span> flag1 = <span class="number">0</span>, flag2 = <span class="number">0</span>; <span class="comment">//flag1：是否在小数点后，flag2：是否在e之后</span></span><br><span class="line">    <span class="type">double</span> e = <span class="number">1</span>;             <span class="comment">//小数点之后的权重</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = st; i &lt; ed; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (str[i] &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; str[i] &lt;= <span class="string">&#x27;9&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (!flag1 &amp;&amp; !flag2) <span class="comment">//e以前，小数点前</span></span><br><span class="line">                num1 = num1 * <span class="number">10</span> + (str[i] - <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (flag1 &amp;&amp; !flag2) <span class="comment">//e以前，小数点后</span></span><br><span class="line">            &#123;</span><br><span class="line">                e = e / <span class="number">10.0</span>;</span><br><span class="line">                (*precision)++;</span><br><span class="line">                num1 = num1 + (str[i] - <span class="string">&#x27;0&#x27;</span>) * e;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (flag2) <span class="comment">//e以后</span></span><br><span class="line">                num2 = num2 * <span class="number">10</span> + (str[i] - <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (str[i] == <span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            flag1 = <span class="number">1</span>;</span><br><span class="line">            (*precision)++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (str[i] == <span class="string">&#x27;e&#x27;</span> || str[i] == <span class="string">&#x27;E&#x27;</span>)</span><br><span class="line">            flag2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (str[i] == <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">            flag2 = <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (e != <span class="number">1</span>)</span><br><span class="line">        (*precision)--;</span><br><span class="line"></span><br><span class="line">    <span class="type">double</span> k = <span class="number">1</span>;   <span class="comment">//10的num2次方</span></span><br><span class="line">    <span class="keyword">if</span> (flag2 == <span class="number">1</span>) <span class="comment">//e之后是正幂次</span></span><br><span class="line">    &#123;</span><br><span class="line">        (*precision) -= num2;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; num2; i++)</span><br><span class="line">            k = k * <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (flag2 == <span class="number">2</span>) <span class="comment">//e之后是负幂次</span></span><br><span class="line">    &#123;</span><br><span class="line">        (*precision) += num2;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; num2; i++)</span><br><span class="line">            k = k / <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (*precision &lt;= <span class="number">0</span>)</span><br><span class="line">        *precision = <span class="number">1</span>;</span><br><span class="line">    num1 = num1 * k;</span><br><span class="line">    <span class="keyword">return</span> num1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">printByPrecision</span><span class="params">(<span class="type">double</span> x, <span class="type">int</span> precision)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> buffer[<span class="number">20</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="built_in">sprintf</span>(buffer, <span class="string">&quot;%.*lf&quot;</span>, precision, x);</span><br><span class="line">    <span class="type">int</span> len = <span class="built_in">strlen</span>(buffer);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (buffer[i] == <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">            precision--;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (precision == <span class="number">0</span>)</span><br><span class="line">        precision++;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%.*lf&quot;</span>, precision, x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">%&#125;</span><br><span class="line">digit [<span class="number">0</span><span class="number">-9</span>]</span><br><span class="line">intpart &#123;digit&#125;+</span><br><span class="line">pointfloat (&#123;intpart&#125;?[.]&#123;intpart&#125;)|(&#123;intpart&#125;[.])</span><br><span class="line">exponentfloat (&#123;intpart&#125;|&#123;pointfloat&#125;)(e|E)[-+]?&#123;intpart&#125;</span><br><span class="line">decimalinteger ([<span class="number">1</span><span class="number">-9</span>][<span class="number">0</span><span class="number">-9</span>]*)|<span class="number">0</span></span><br><span class="line">numeric &#123;decimalinteger&#125;|&#123;pointfloat&#125;|&#123;exponentfloat&#125;</span><br><span class="line">alphabet [a-zA-Z]</span><br><span class="line">variable (&#123;alphabet&#125;|_)+(&#123;numeric&#125;|&#123;alphabet&#125;|_)*</span><br><span class="line">expression [-+]?(&#123;numeric&#125;|&#123;variable&#125;)([-+](&#123;numeric&#125;|&#123;variable&#125;))*</span><br><span class="line">%%</span><br><span class="line"></span><br><span class="line">&#123;exponentfloat&#125; &#123;</span><br><span class="line">    <span class="type">int</span> precision = <span class="number">0</span>;</span><br><span class="line">    <span class="type">double</span> decimal = str2double(yytext, <span class="number">0</span>, yyleng, &amp;precision);</span><br><span class="line">    printByPrecision(decimal, precision);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;variable&#125; &#123;</span><br><span class="line">    ECHO;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;expression&#125; &#123;</span><br><span class="line">    <span class="type">int</span> st = <span class="number">0</span>, flag = <span class="number">1</span>; <span class="comment">//st：当前数字的在字符串中开始的位置，flag：需要加还是减</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> hasVar = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//判断是否有变量</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; yyleng; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> ((yytext[i] == <span class="string">&#x27;+&#x27;</span> || yytext[i] == <span class="string">&#x27;-&#x27;</span>) &amp;&amp; !(yytext[i + <span class="number">1</span>] &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; yytext[i + <span class="number">1</span>] &lt;= <span class="string">&#x27;9&#x27;</span> || yytext[i + <span class="number">1</span>] == <span class="string">&#x27;.&#x27;</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            ECHO;</span><br><span class="line">            hasVar = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!hasVar)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> isfloat = <span class="number">0</span>; <span class="comment">//是否作为浮点数进行计算</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; yyleng; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (yytext[i] == <span class="string">&#x27;.&#x27;</span> || yytext[i] == <span class="string">&#x27;e&#x27;</span> || yytext[i] == <span class="string">&#x27;E&#x27;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                isfloat = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (isfloat)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> maxprecision = <span class="number">0</span>, precision = <span class="number">0</span>;</span><br><span class="line">            <span class="type">double</span> sum = <span class="number">0</span>; <span class="comment">//运算结果</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; yyleng; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//遇到+-号就可以判断数字的起止位置</span></span><br><span class="line">                <span class="keyword">if</span> (yytext[i] == <span class="string">&#x27;+&#x27;</span> || yytext[i] == <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//如果是第一个符号，那么不进行计算，只更改符号</span></span><br><span class="line">                    <span class="keyword">if</span> (i == <span class="number">0</span>)</span><br><span class="line">                    &#123;</span><br><span class="line">                        flag = (yytext[i] == <span class="string">&#x27;+&#x27;</span>) ? <span class="number">1</span> : <span class="number">-1</span>;</span><br><span class="line">                        st = i + <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//如果前面不是E，那么进行计算，如果是E的话，认为是数字的一部分，交给str2double处理</span></span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span> (yytext[i - <span class="number">1</span>] != <span class="string">&#x27;E&#x27;</span> &amp;&amp; yytext[i - <span class="number">1</span>] != <span class="string">&#x27;e&#x27;</span>)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="type">double</span> tmp = str2double(yytext, st, i, &amp;precision);</span><br><span class="line">                        <span class="keyword">if</span> (precision &gt; maxprecision)</span><br><span class="line">                            maxprecision = precision;</span><br><span class="line">                        sum += tmp * flag;</span><br><span class="line">                        flag = (yytext[i] == <span class="string">&#x27;+&#x27;</span>) ? <span class="number">1</span> : <span class="number">-1</span>;</span><br><span class="line">                        st = i + <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//遇到匹配末尾</span></span><br><span class="line">                <span class="keyword">if</span> (i == yyleng - <span class="number">1</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="type">double</span> tmp = str2double(yytext, st, yyleng, &amp;precision);</span><br><span class="line">                    <span class="keyword">if</span> (precision &gt; maxprecision)</span><br><span class="line">                        maxprecision = precision;</span><br><span class="line">                    sum += tmp * flag;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            printByPrecision(sum, maxprecision);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> sum = <span class="number">0</span>; <span class="comment">//运算结果</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; yyleng; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//遇到+-号就可以判断数字的起止位置</span></span><br><span class="line">                <span class="keyword">if</span> (yytext[i] == <span class="string">&#x27;+&#x27;</span> || yytext[i] == <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//如果不是第一个符号，进行计算</span></span><br><span class="line">                    <span class="keyword">if</span> (i != <span class="number">0</span>)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="type">int</span> tmp = str2int(yytext, st, i);</span><br><span class="line">                        sum += tmp * flag;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//整数情况下不存在E</span></span><br><span class="line">                    flag = (yytext[i] == <span class="string">&#x27;+&#x27;</span>) ? <span class="number">1</span> : <span class="number">-1</span>;</span><br><span class="line">                    st = i + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//遇到匹配末尾了</span></span><br><span class="line">                <span class="keyword">if</span> (i == yyleng - <span class="number">1</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="type">int</span> tmp = str2int(yytext, st, yyleng);</span><br><span class="line">                    sum += tmp * flag;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, sum);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;    </span><br><span class="line">%%</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    yylex();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://blog.dujiajun.site/2018/12/23/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E4%B8%8A%E6%9C%BA%E4%BD%9C%E4%B8%9A/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="杜某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一无是处杜某某">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 一无是处杜某某">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/12/23/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E4%B8%8A%E6%9C%BA%E4%BD%9C%E4%B8%9A/" class="post-title-link" itemprop="url">数字信号处理上机作业</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-12-23 13:59:08" itemprop="dateCreated datePublished" datetime="2018-12-23T13:59:08+08:00">2018-12-23</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="第一题"><a href="#第一题" class="headerlink" title="第一题"></a>第一题</h2><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>以自己的学号建立序列$x[n]$，$x[n]&#x3D;{5,1,6,0,2,1,9,1,0,0,3,9}，n&#x3D;{0,1,…,11}$。</p>
<ol>
<li>画出$x[n]$的傅里叶变换$X(e^{jω})$的幅度和相位曲线；</li>
<li>画出$x[n]$的32点DFT $X[k]$，要求与（1）画在同一幅图上，验证频域取样关系；</li>
<li>画出$X[k]$经过32点IDFT得到的$x[n]$，验证DFT与IDFT的唯一性。</li>
</ol>
<h3 id="MATLAB代码"><a href="#MATLAB代码" class="headerlink" title="MATLAB代码"></a>MATLAB代码</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">clear,clc;</span><br><span class="line">N = <span class="number">32</span>; <span class="comment">%点数</span></span><br><span class="line">x = <span class="built_in">zeros</span>(<span class="number">1</span>,N);</span><br><span class="line">x(<span class="number">1</span>:<span class="number">12</span>) = [<span class="number">5</span>,<span class="number">1</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">9</span>];</span><br><span class="line">n = <span class="number">0</span>:N<span class="number">-1</span>;</span><br><span class="line">cnt = <span class="number">1</span>;</span><br><span class="line">y = <span class="built_in">zeros</span>(<span class="number">201</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">%用fft和ifft函数求DFT和IDFT</span></span><br><span class="line">f_y = fft(x,N);</span><br><span class="line">f_x = <span class="number">2</span>*<span class="built_in">pi</span>/N.*n;</span><br><span class="line">n_x = ifft(f_y,N);</span><br><span class="line"></span><br><span class="line"><span class="comment">%求傅里叶变换</span></span><br><span class="line">syms w;</span><br><span class="line">y = sum(x.*<span class="built_in">exp</span>(<span class="number">-1</span><span class="built_in">i</span>*n*w));</span><br><span class="line"></span><br><span class="line"><span class="comment">%绘图</span></span><br><span class="line"><span class="built_in">figure</span>;</span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">fplot(<span class="built_in">abs</span>(y),[<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>])</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line">stem(f_x,<span class="built_in">abs</span>(f_y))</span><br><span class="line"></span><br><span class="line"><span class="comment">%设置坐标轴刻度与标题</span></span><br><span class="line">xlabel(<span class="string">&#x27;ω&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;幅值&#x27;</span>);</span><br><span class="line">set(gca,<span class="string">&#x27;XTick&#x27;</span>,<span class="number">0</span>:<span class="built_in">pi</span>/<span class="number">2</span>:<span class="number">2</span>*<span class="built_in">pi</span>)</span><br><span class="line">set(gca,<span class="string">&#x27;xtickLabel&#x27;</span>,&#123;<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;π/2&#x27;</span>,<span class="string">&#x27;π&#x27;</span>,<span class="string">&#x27;3π/2&#x27;</span>,<span class="string">&#x27;2π&#x27;</span>&#125;)</span><br><span class="line">axis([<span class="number">0</span> <span class="built_in">pi</span>*<span class="number">2</span> <span class="number">0</span> <span class="number">40</span>])</span><br><span class="line"></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">fplot(<span class="built_in">angle</span>(y),[<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">%设置坐标轴刻度与标题</span></span><br><span class="line">xlabel(<span class="string">&#x27;ω&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;相位&#x27;</span>);</span><br><span class="line">set(gca,<span class="string">&#x27;XTick&#x27;</span>,<span class="number">0</span>:<span class="built_in">pi</span>/<span class="number">2</span>:<span class="number">2</span>*<span class="built_in">pi</span>)</span><br><span class="line">set(gca,<span class="string">&#x27;xtickLabel&#x27;</span>,&#123;<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;π/2&#x27;</span>,<span class="string">&#x27;π&#x27;</span>,<span class="string">&#x27;3π/2&#x27;</span>,<span class="string">&#x27;2π&#x27;</span>&#125;)</span><br><span class="line">set(gca,<span class="string">&#x27;YTick&#x27;</span>,-<span class="built_in">pi</span>:<span class="built_in">pi</span>/<span class="number">2</span>:<span class="built_in">pi</span>)</span><br><span class="line">set(gca,<span class="string">&#x27;ytickLabel&#x27;</span>,&#123;<span class="string">&#x27;-π&#x27;</span>,<span class="string">&#x27;π/2&#x27;</span>,<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;π/2&#x27;</span>,<span class="string">&#x27;π&#x27;</span>&#125;)</span><br><span class="line">axis([<span class="number">0</span> <span class="built_in">pi</span>*<span class="number">2</span> -<span class="built_in">pi</span> <span class="built_in">pi</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>;</span><br><span class="line">stem(<span class="number">0</span>:N<span class="number">-1</span>,n_x);    <span class="comment">%32点IDFT</span></span><br><span class="line">axis([<span class="number">0</span> <span class="number">31</span> <span class="number">0</span> <span class="number">10</span>])</span><br></pre></td></tr></table></figure>

<h3 id="图像"><a href="#图像" class="headerlink" title="图像"></a>图像</h3><img src="/2018/12/23/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E4%B8%8A%E6%9C%BA%E4%BD%9C%E4%B8%9A/p1.svg" class="">

<img src="/2018/12/23/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E4%B8%8A%E6%9C%BA%E4%BD%9C%E4%B8%9A/p2.svg" class="">

<h2 id="第二题"><a href="#第二题" class="headerlink" title="第二题"></a>第二题</h2><h3 id="题目描述-1"><a href="#题目描述-1" class="headerlink" title="题目描述"></a>题目描述</h3><p>采用脉冲响应不变法设计一个巴特沃斯离散时间低通IIR滤波器，要求通带截止频率$ω_p&#x3D;0.3π rad$，阻带截止频率$ω_s&#x3D;0.4π rad$，通带最大衰减$α_p&#x3D;1 dB$，阻带最小衰减$α_s&#x3D;30 dB$。取$T_d&#x3D;1$，给出滤波器阶数、连续时间和离散时间滤波器的系统函数，并画出连续时间和离散时间系统的对数幅度响应曲线和单位脉冲响应曲线。</p>
<h3 id="阶数与系统函数"><a href="#阶数与系统函数" class="headerlink" title="阶数与系统函数"></a>阶数与系统函数</h3><p>滤波器阶数$N&#x3D;15$</p>
<p>连续时间滤波器系统函数为<br>$$<br>H_c(s) &#x3D; \frac{\sum^{N}<em>{k&#x3D;0} b_k s^{N-k}} {\sum^{N}</em>{k&#x3D;0} a_k s^{N-k}}，其中<br>\<br>a_k &#x3D; [1,9.5497,45.5983,144.0774,336.2895,613.3351,\902.0572,1088.6924,1086.7497,897.2369,607.8823,\332.1113,141.7800,44.7113,9.3305,0.9735]<br>\<br>b_k &#x3D; [0,0,0,0,0,0,0,0,\0,0,0,0,0,0,0,\0.973565591260273]<br>$$<br>离散时间滤波器系统函数<br>$$<br>H(z) &#x3D; \frac{\sum^{N}<em>{k&#x3D;0} b_k z^{-k}} {\sum^{N}</em>{k&#x3D;0} a_k z^{-k}}，其中<br>\<br>a_k &#x3D; [1,-5.9705,17.9738,-35.5026,<br>\50.9018,-55.7017,47.8036,-32.6279,<br>\17.7990,-7.7395,2.6547,-0.7041,<br>\0.1395,-0.0194,0.0017,-7.1222<em>10^{-5}]<br>\<br>b_k&#x3D;[-2.4429</em>10^{-8},1.1806<em>10^{-7},6.5587</em>10^{-6},0.0001,0.0009,<br>\0.0024,0.0027,0.0014,0.0003,4.0372e-05,1.7266<em>10^{-6},<br>\2.2229</em>10^{-8},2.8248<em>10^{-11},6.9987</em>10^{-13},0]<br>$$</p>
<h3 id="MATLAB代码-1"><a href="#MATLAB代码-1" class="headerlink" title="MATLAB代码"></a>MATLAB代码</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">clear,clc;</span><br><span class="line">wp = <span class="number">0.3</span>*<span class="built_in">pi</span>; ap = <span class="number">1</span>;</span><br><span class="line">ws = <span class="number">0.4</span>*<span class="built_in">pi</span>; as = <span class="number">30</span>;</span><br><span class="line">Td = <span class="number">1</span>; </span><br><span class="line">Wp = wp/Td;</span><br><span class="line">Ws = ws/Td;</span><br><span class="line"><span class="comment">%求连续时间滤波器阶数和截止频率</span></span><br><span class="line">[N,Wc] = buttord(Wp,Ws,ap,as,<span class="string">&#x27;s&#x27;</span>)</span><br><span class="line"><span class="comment">%连续时间滤波器系统函数</span></span><br><span class="line">[Bs,As] = butter(N,Wc,<span class="string">&#x27;s&#x27;</span>); </span><br><span class="line"><span class="comment">%脉冲响应不变法得到离散滤波器系统函数</span></span><br><span class="line">[Bz,Az] = impinvar(Bs,As,<span class="number">1</span>/Td);</span><br><span class="line"><span class="comment">%绘图</span></span><br><span class="line">width = <span class="number">1.5</span>;</span><br><span class="line">[H,W] = freqs(Bs,As);</span><br><span class="line"><span class="built_in">plot</span>(W*Td/<span class="built_in">pi</span>,<span class="number">20</span>*(<span class="built_in">log10</span>(<span class="built_in">abs</span>(H))),<span class="string">&#x27;LineWidth&#x27;</span>,width);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">[H,w]=freqz(Bz,Az); </span><br><span class="line"><span class="built_in">plot</span>(w/<span class="built_in">pi</span>,<span class="number">20</span>*(<span class="built_in">log10</span>(<span class="built_in">abs</span>(H))),<span class="string">&#x27;LineWidth&#x27;</span>,width);</span><br><span class="line">axis([<span class="number">0</span>,<span class="number">1</span>,<span class="number">-200</span>,<span class="number">2</span>]); </span><br><span class="line">grid; </span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;离散&#x27;</span>,<span class="string">&#x27;连续&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;ω(*π rad) Ω(*π rad/s)&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;幅值响应(dB)&#x27;</span>);</span><br><span class="line"><span class="built_in">figure</span>; </span><br><span class="line">[h,n]=impz(Bz,Az); </span><br><span class="line">stem(n,h,<span class="string">&#x27;LineWidth&#x27;</span>,width); </span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">g=tf(Bs,As); </span><br><span class="line">[h1,t]=impulse(g,<span class="number">0</span>:<span class="number">0.1</span>:<span class="number">40</span>);</span><br><span class="line"><span class="built_in">plot</span>(t,h1,<span class="string">&#x27;LineWidth&#x27;</span>,width);</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;离散&#x27;</span>,<span class="string">&#x27;连续&#x27;</span>);</span><br><span class="line">axis([<span class="number">0</span>,<span class="number">40</span>,<span class="number">-0.3</span>,<span class="number">0.5</span>]);</span><br><span class="line">xlabel(<span class="string">&#x27;t(s)或n(样本)&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;单位脉冲响应&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="图像-1"><a href="#图像-1" class="headerlink" title="图像"></a>图像</h3><img src="/2018/12/23/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E4%B8%8A%E6%9C%BA%E4%BD%9C%E4%B8%9A/p3.svg" class="">

<img src="/2018/12/23/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E4%B8%8A%E6%9C%BA%E4%BD%9C%E4%B8%9A/p4.svg" class="">
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://blog.dujiajun.site/2018/12/23/%E9%97%AE%E9%A2%98undefined-reference-to-XX-%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="杜某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一无是处杜某某">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 一无是处杜某某">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/12/23/%E9%97%AE%E9%A2%98undefined-reference-to-XX-%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/" class="post-title-link" itemprop="url">问题undefined reference to 'XX'的解决方法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-12-23 13:39:13" itemprop="dateCreated datePublished" datetime="2018-12-23T13:39:13+08:00">2018-12-23</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在G++（Code Blocks自带编译器）中，有时会报错<code>undefined reference to &#39;XX&#39;</code>。而在VS中相同问题的可能报错“无法解析的外部符号，xxxx，该符号在函数XX中被引用”。需要明确的是，这个问题属于链接错误，不是编译错误，因此核心思想是看函数是不是只声明了而没有定义，和函数内部的代码无关。具体原因有几种，下面将分别列举原因与解决方法。</p>
<h2 id="第一种情况：没写main函数"><a href="#第一种情况：没写main函数" class="headerlink" title="第一种情况：没写main函数"></a>第一种情况：没写main函数</h2><h3 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h3><p>报错信息为：<code>undefine reference to &#39;WinMain&#39;</code>。</p>
<img src="/2018/12/23/%E9%97%AE%E9%A2%98undefined-reference-to-XX-%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/062613435301001.png" class="">

<p>看到这个报错，只有一种情况，就是没写<code>main</code>函数，找不到可执行程序的入口。</p>
<h3 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h3><p>在程序中写上<code>main</code>函数即可。</p>
<h2 id="第二种情况：工程文件配置错误"><a href="#第二种情况：工程文件配置错误" class="headerlink" title="第二种情况：工程文件配置错误"></a>第二种情况：工程文件配置错误</h2><h3 id="问题分析-1"><a href="#问题分析-1" class="headerlink" title="问题分析"></a>问题分析</h3><p>这种情况可能会出现在Code Blocks中，一般不会出现在Visual Studio中。</p>
<img src="/2018/12/23/%E9%97%AE%E9%A2%98undefined-reference-to-XX-%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/062613435301002.png" class="">

<p>程序代码由多个<code>.cpp</code>文件和若干个<code>.h</code>文件组成，编译时只编译了<code>main</code>函数所在的<code>cpp</code>文件，没有编译（或者链接）上报错中函数的定义所在的<code>cpp</code>文件。</p>
<h3 id="解决方法-1"><a href="#解决方法-1" class="headerlink" title="解决方法"></a>解决方法</h3><ol>
<li><p>在项目左侧Projects中找到当前工程，在工程名上右键，选择Properties…。</p>
<img src="/2018/12/23/%E9%97%AE%E9%A2%98undefined-reference-to-XX-%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/062613435301003.png" class="">

<p>如果左侧Workspace下为空，说明没有建立工程。请在菜单中File - New - Project…建立工程，并跳到第4步。</p>
</li>
<li><p>选择Build targets标签页，查看Debug（或者Default）下的Build target files，查看是否所有文件都被选中。</p>
<img src="/2018/12/23/%E9%97%AE%E9%A2%98undefined-reference-to-XX-%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/062613435301004.png" class="">

<p>如果文件都选中了，那么不是这种情况的问题。</p>
</li>
<li><p>如果有文件没有被选中的话，将其选中，然后点OK。</p>
<img src="/2018/12/23/%E9%97%AE%E9%A2%98undefined-reference-to-XX-%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/062613435301005.png" class="">
</li>
<li><p>下一次在File - New - File的时候，出现下图的窗口时，记得全部勾上。</p>
<img src="/2018/12/23/%E9%97%AE%E9%A2%98undefined-reference-to-XX-%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/062613435301006.png" class=""></li>
</ol>
<h2 id="第三种情况：函数的声明和定义不匹配"><a href="#第三种情况：函数的声明和定义不匹配" class="headerlink" title="第三种情况：函数的声明和定义不匹配"></a>第三种情况：函数的声明和定义不匹配</h2><h3 id="问题分析-2"><a href="#问题分析-2" class="headerlink" title="问题分析"></a>问题分析</h3><img src="/2018/12/23/%E9%97%AE%E9%A2%98undefined-reference-to-XX-%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/062613435301007.png" class="">

<p>在这个例子中，<code>Foo</code>是一个类型，我们对其重载了<code>&lt;&lt;</code>运算符。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream &amp;os,<span class="type">const</span> Foo &amp;x);</span><br></pre></td></tr></table></figure>

<p>但是我们在定义&lt;&lt;运算符重载的时候，写成了如下形式：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream &amp;os, Foo &amp;x)	<span class="comment">//这里缺了const</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//TODO</span></span><br><span class="line">    <span class="keyword">return</span> os;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>函数的声明和定义并不匹配，因此会报错。而且这种报错只会出现在，函数已经声明，但没有其定义或者定义不匹配的时候。</p>
<p>如果没有声明函数的话，报错将会是<code>No match for xxx</code>。如果该函数是某个类的友元函数的话，会报<code>XX is private</code>错误。</p>
<h3 id="解决方法-2"><a href="#解决方法-2" class="headerlink" title="解决方法"></a>解决方法</h3><p>如果没有定义的话，定义函数。如果已经定义了函数的话，将函数的声明和定义保持一致。</p>
<h2 id="第四种情况：类模板的函数声明和定义分离"><a href="#第四种情况：类模板的函数声明和定义分离" class="headerlink" title="第四种情况：类模板的函数声明和定义分离"></a>第四种情况：类模板的函数声明和定义分离</h2><h3 id="问题分析-3"><a href="#问题分析-3" class="headerlink" title="问题分析"></a>问题分析</h3><p>在之前的面向对象程序设计中，一般习惯是将类的成员和成员函数的声明写在<code>.h</code>文件里，而将各个成员函数的实现、和静态成员变量的初始化写在对应<code>cpp</code>文件里面。而当引入类模板之后，如果继续这样操作的话，将会报错。</p>
<img src="/2018/12/23/%E9%97%AE%E9%A2%98undefined-reference-to-XX-%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/062613435301008.png" class="">

<h3 id="解决方法-3"><a href="#解决方法-3" class="headerlink" title="解决方法"></a>解决方法</h3><p>将该类的声明，与成员函数的实现、静态变量的初始化写在同一个文件（一般是头文件）里面。</p>
<h2 id="第五中情况：类模板的友元的声明"><a href="#第五中情况：类模板的友元的声明" class="headerlink" title="第五中情况：类模板的友元的声明"></a>第五中情况：类模板的友元的声明</h2><h3 id="问题分析-4"><a href="#问题分析-4" class="headerlink" title="问题分析"></a>问题分析</h3><p>当有如下代码时，将会报错</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream &amp;os,<span class="type">const</span> Foo&amp;x);</span><br><span class="line"></span><br><span class="line">    T a;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="built_in">Foo</span>(<span class="type">const</span> T &amp;a);</span><br><span class="line">        ~<span class="built_in">Foo</span>();</span><br><span class="line">        <span class="built_in">Foo</span>(<span class="type">const</span> Foo&amp; other);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<img src="/2018/12/23/%E9%97%AE%E9%A2%98undefined-reference-to-XX-%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/062613435301009.png" class="">

<p>这是因为声明友元的时候没有声明其为函数模板。</p>
<h3 id="解决方法-4"><a href="#解决方法-4" class="headerlink" title="解决方法"></a>解决方法</h3><p>声明友元函数的时候，也需要声明其为函数模板。</p>
<p><strong>方法1</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">Type</span>&gt;</span><br><span class="line">    <span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream &amp;os,<span class="type">const</span> Foo&lt;Type&gt;&amp;x);</span><br><span class="line">    T a;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="built_in">Foo</span>(<span class="type">const</span> T &amp;a);</span><br><span class="line">        ~<span class="built_in">Foo</span>();</span><br><span class="line">        <span class="built_in">Foo</span>(<span class="type">const</span> Foo&amp; other);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>如果将上面的<code>Type</code>改成<code>T</code>，那么在VS上正常编译，在G++（Code Blocks）上无法编译通过，报错如下：</p>
<img src="/2018/12/23/%E9%97%AE%E9%A2%98undefined-reference-to-XX-%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/062613435301010.png" class="">

<p><strong>方法2（教材上的示例）</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt; <span class="keyword">class</span> <span class="title class_">Foo</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt; ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream &amp;os,<span class="type">const</span> Foo&lt;T&gt;&amp;x);</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt; &lt;&gt;(ostream &amp;os,<span class="type">const</span> Foo&amp;x);	<span class="comment">//注意这里的&lt;&gt;</span></span><br><span class="line">    T a;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="built_in">Foo</span>(<span class="type">const</span> T &amp;a);</span><br><span class="line">        ~<span class="built_in">Foo</span>();</span><br><span class="line">        <span class="built_in">Foo</span>(<span class="type">const</span> Foo&amp; other);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul>
<li><code>undefined reference to &#39;XX&#39;</code>这种报错会出现在，<strong>函数已经声明</strong>，而且<strong>调用时参数与声明的一致</strong>，但是<strong>没有定义</strong>或者<strong>声明与定义（实现）不匹配</strong>的时候。</li>
<li>如果<strong>没有声明函数</strong>或者<strong>调用时参数与声明不一样</strong>的话，报错将会是<code>No match for xxx</code>。如果该函数是某个类的友元函数的话，还会报<code>XX is private</code>错误。</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://blog.dujiajun.site/2018/12/03/%E5%BD%93%E4%BB%A3%E4%B8%AD%E5%9B%BD%E5%9F%8E%E9%95%87%E5%8C%96%E5%8F%91%E5%B1%95%E4%B8%AD%E5%9F%8E%E5%B8%82%E8%A7%84%E6%A8%A1%E9%97%AE%E9%A2%98%E6%8E%A2%E7%A9%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="杜某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一无是处杜某某">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 一无是处杜某某">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/12/03/%E5%BD%93%E4%BB%A3%E4%B8%AD%E5%9B%BD%E5%9F%8E%E9%95%87%E5%8C%96%E5%8F%91%E5%B1%95%E4%B8%AD%E5%9F%8E%E5%B8%82%E8%A7%84%E6%A8%A1%E9%97%AE%E9%A2%98%E6%8E%A2%E7%A9%B6/" class="post-title-link" itemprop="url">当代中国城镇化发展中城市规模问题探究</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-12-03 14:07:35" itemprop="dateCreated datePublished" datetime="2018-12-03T14:07:35+08:00">2018-12-03</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>本文为当代中国社会问题课程作业</p>
</blockquote>
<h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><p>当前中国社会经济发展过程中，城镇化是经济发展的主要推动力也是重要结果。中国城镇化过程中对城市规模的规划存在限制特大城市规模，约束大城市规模等政策，这些政策是否会产生城镇化进程中的问题。中小城镇和农村出现的空心化现象能否靠限制大城市人口进行解决。本文列举了当前我国城市规划中对城市规模限制的若干问题，分析了制定限制大城市人口政策的原因，并解决城镇化进程中这些问题给出了几点解决方法。<br>关键词：<strong>当代中国社会问题 城镇化 城市规划 人口</strong></p>
<h2 id="1-引言"><a href="#1-引言" class="headerlink" title="1.引言"></a>1.引言</h2><p>在当代中国社会经济发展过程中，城镇化是经济发展的重要结果，也是城市消费和公共服务发展的重要推动力。当前我国城镇化进程中，城市人口始终是一个重要话题。近年来，大城市出现的交通拥堵、环境污染、公共资源与公共服务不足等问题，在舆论上很大程度被指向城市人口过多这个原因。而在三四线城市与农村，媒体关注其“空心化”问题。这些现象都归结到是否应该控制城市规模，怎样合理引导城市积极发展这些问题上。</p>
<h2 id="2-问题现状"><a href="#2-问题现状" class="headerlink" title="2.问题现状"></a>2.问题现状</h2><h3 id="2-1-城市首位律"><a href="#2-1-城市首位律" class="headerlink" title="2.1 城市首位律"></a>2.1 城市首位律</h3><p>城市首位律是美国知名地理学家马克·杰佛森于1939年提出的对国家城市规模分布规律的概括。该定律认为，在一个国家或地区中往往存在一个比第二大城市大得多的“首位城市”，吸引了全国城市人口的很大部分，在一个国家或地区的政治、经济、社会、文化以及生活等方面占据明显优势。</p>
<p>学者马歇尔对马克·杰佛森的城市首位律进行量化，认为“大得多”比较合理的指数是2.0，即两城市指数法。后来不断发展，相继提出了四城市指数法和十一城市指数法。</p>
<h3 id="2-2-上海的首位度"><a href="#2-2-上海的首位度" class="headerlink" title="2.2 上海的首位度"></a>2.2 上海的首位度</h3><p>上海是我国最大的城市，根据上海市统计局发布的《2017年上海市国民经济和社会发展统计公报》数据显示，2017年底上海全市常住人口人口2418.33万人 。根据北京市统计局发布的《北京市2017年国民经济和社会发展统计公报》中显示，2017年底北京全市常住人口2170.7万人 。</p>
<p>按照两城市指数法，在全国层面来看，上海的首位度为1.114，远低于马克·杰佛森认为的“大得多”。上海交通大学安泰经济与管理学院的陆铭教授在《大国大城》一书中认为，上海的人口不是太多了，而是太少了 。</p>
<h3 id="2-3-其他城市的规模"><a href="#2-3-其他城市的规模" class="headerlink" title="2.3 其他城市的规模"></a>2.3 其他城市的规模</h3><p>不仅是上海和北京，我国各大城市总体规划中均体现了控制人口的思想。在当前已经批复建设的国家中心城市中，到2020年，广州市域常驻人口控制在1800万以内 ，天津中心城区控制在630万左右 ，重庆中心城区控制在700万以内 ，成都中心城区控制在620万以内 ，武汉主城区控制在502万以内 ，西安主城区控制在528万以内 ，郑州中心城区控制在450万以内 。</p>
<h2 id="3-问题解释"><a href="#3-问题解释" class="headerlink" title="3.问题解释"></a>3.问题解释</h2><h3 id="3-1-我国城镇化总体趋势"><a href="#3-1-我国城镇化总体趋势" class="headerlink" title="3.1 我国城镇化总体趋势"></a>3.1 我国城镇化总体趋势</h3><p>改革开放40年来，我国城镇常住人口从1.7亿人提高到8.1亿人，城镇化比例从17.9%提高到58.52% 。我国大城市的数量和比重不断增加；中小城市比重甚至数量在减少。大量劳动力从内地到沿海，从西部到东部，每年春节期间形成了中国特色的“春运”现象。很多地方只注重了城市建设的城镇化，而忽视了人的城镇化，忽视城镇居民特别是外来务工人员的基本就业及社会保障需求。</p>
<p>造成这些问题的原因包括，资源配置的行政导向，市场经济的马太效应等等。按照当前我国基本矛盾，我认为可以归结为“不平衡不充分的社会发展”。</p>
<h3 id="3-1城市规模约束"><a href="#3-1城市规模约束" class="headerlink" title="3.1城市规模约束"></a>3.1城市规模约束</h3><p>按照《中华人民共和国土地资源法》，“十分珍惜、合理利用土地和切实保护耕地是我国的基本国策”。我国城市发展中，一般需要由上级政府批复该城市的总体规划。我国城镇化的总体政策为，控制大城市规模、合理发展中小城市和小城镇的城镇化规模。例如，在《国务院关于上海市城市总体规划的批复》（国函〔2017〕147号）中明确写出，“严格控制城市规模。……到2035年，上海市常住人口控制在2500万左右，建设用地总规模不超过3200平方公里”。在《中共中央 国务院关于对〈北京城市总体规划（2016年－2035年）〉的批复》中明确写出，“严格控制城市规模。……到2020年，常住人口规模控制在2300万人以内，2020年以后长期稳定在这一水平”。</p>
<p>在这种规划下，城市社会公共资源和公共服务将按照预计的常驻人口和略带余量的流动人口进行设置。但在城镇化进程快速推进的20多年来，上海和北京等大城市的实际人口实际上按照远超过规划的人口增长速度发展。一时间，交通拥堵、教育医疗资源不足等“大城市病”缠绕，“北漂”“沪漂”成为受到关注的词语。舆论和官方认为，我们的城市太大了，需要限制人口。</p>
<h3 id="3-2-城市财政有限"><a href="#3-2-城市财政有限" class="headerlink" title="3.2 城市财政有限"></a>3.2 城市财政有限</h3><p>1994年推进分税制改革以来，财政税收分为中央税、地方税和共享税。城市建设是地方政府的事权，也是地方政府的责任，但财税大头上交中央。在这种背景下，地方政府财政有限，仅能按照城市规划人口规模进行配套公共服务投入，难以提供满足实际人口规模需要的公共资源。地方政府缺乏对超过规划的流动人口进行大规模公共服务投入的意愿和能力，导致城市公共服务不足。</p>
<h3 id="3-3-地区、城乡发展不平衡"><a href="#3-3-地区、城乡发展不平衡" class="headerlink" title="3.3 地区、城乡发展不平衡"></a>3.3 地区、城乡发展不平衡</h3><p>中国当代城市发展格局，可以追溯到晚清开埠。帝国主义对于通商口岸的选择奠定了一大批近代工商业城市发展的基础。新中国成立后的社会主义改造、三线工程、开发大西北等一系列工程对地区平衡发展起到了重要作用。随着改革开放，市场经济下东部沿海地区得到快速发展，吸引了大量内地劳动力迁入。虽然西部大开发、振兴东北老工业基地、中部崛起和东部率先作为区域协调发展战略，但当前市场作为资源配置的决定性因素，地区差异是短时间内不能抹平的。地区、城乡之间发展的不平衡，使得城市规模的扩张比规划来得更快，因此出现当前城镇化中的问题。</p>
<h2 id="4-解决对策"><a href="#4-解决对策" class="headerlink" title="4.解决对策"></a>4.解决对策</h2><h3 id="4-1-高质量经济发展"><a href="#4-1-高质量经济发展" class="headerlink" title="4.1 高质量经济发展"></a>4.1 高质量经济发展</h3><p>城镇化建设过程中的问题，最核心的就是钱的问题。地方政府对城市建设负责，那么地方政府有资金才能有意愿进行持续投入。发展不充分的问题要靠发展来解决，经济高质量发展才能带来持续性的资金投入。有了足够资金投入，才能建设满足城市实际需要的公共设施与服务。</p>
<h3 id="4-2-新型城镇化发展"><a href="#4-2-新型城镇化发展" class="headerlink" title="4.2 新型城镇化发展"></a>4.2 新型城镇化发展</h3><p>根据党的十八大精神，中共中央国务院印发《国家新型城镇化规划（2014-2020）》，明确走中国特色新型城镇化道路。预计到规划期末，东部地区城市群一体化水平和国际竞争力明显提高，中西部地区城市群成为推动区域协调发展的新的重要增长极。城市规模结构更加完善，中心城市辐射带动作用更加突出，中小城市数量增加，小城镇服务功能增强。稳步推进义务教育、就业服务、基本养老、基本医疗卫生、保障性住房等城镇基本公共服务覆盖全部常住人口，基础设施和公共服务设施更加完善。</p>
<h3 id="4-3-城市群建设"><a href="#4-3-城市群建设" class="headerlink" title="4.3 城市群建设"></a>4.3 城市群建设</h3><p>以城市群为主体构建大中小城市和小城镇协调发展的城镇格局。人类历史上从来没有过这么庞大的城市化进程，中国现在需要走出自己的道路。十九大报告中指出，以城市群作为主体。在全国范围内，有着京津冀、长三角、珠三角、成渝等诸多发展完善或发展中的城市群。中国的13亿人口如果要达到发达国家的水平，单凭若干个城市远远承担不了这么庞大的人口，势必会产生严重的大城市病。走中国特色城镇化发展路线，建设一大批城市群，将会是一个更好的选择。例如，十九大报告中特别提到，疏解北京非首都职能，高起点、高标准建设雄安新区。一方面缓解北京严重的大城市病，另一方面促进城市群内其余城市的发展，实现京津冀地区的共同发展。</p>
<p>港珠澳大湾区、长三角一体化已经上升为国家战略，在城市群建设过程中需要破除行政藩篱，实现公共资源一体化发展。</p>
<h3 id="4-4-城乡统筹发展"><a href="#4-4-城乡统筹发展" class="headerlink" title="4.4 城乡统筹发展"></a>4.4 城乡统筹发展</h3><p>不光是北上广深等一线城市，不光是东部沿海地区，不光是大城市，小城市、中西部、城镇农村等一大批地区的人民同样有着美好生活的需要。城镇化需要区域协调发展，需要城乡统筹发展，需要进行国家层面的战略性布局。例如，实施西部大开发15年来，西部地区已经具备较强的经济基础，能够实现在2020年全面建成小康社会目标。例如，实施城乡统筹发展，建设全国统筹城乡综合配套改革试验区，使农民和市民在各个方面享有同等权利。</p>
<p>促进城乡统筹发展，有利于减少城乡差距，有利于促进农村人口合理有序转移。</p>
<h2 id="5-结论"><a href="#5-结论" class="headerlink" title="5.结论"></a>5.结论</h2><p>当代中国城镇化过程中存在城市规模受限问题，主要原因来源于制度与政策的不够完善以及区域发展不平衡不充分，为了解决这些问题，需要进一步促进区域协调发展，城乡统筹发展。</p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><ol>
<li>2017年上海市国民经济和社会发展统计公报. 上海市统计局. [联机] 2018年3月. <a target="_blank" rel="noopener" href="http://www.stats-sh.gov.cn/html/sjfb/201803/1001690.html">http://www.stats-sh.gov.cn/html/sjfb/201803/1001690.html</a>.</li>
<li>北京市2017年国民经济和社会发展统计公报. 北京市统计局. [联机] 2018年2月. <a target="_blank" rel="noopener" href="http://www.bjstats.gov.cn/zxfb/201802/t20180225_393332.html">http://www.bjstats.gov.cn/zxfb/201802/t20180225_393332.html</a></li>
<li>陆铭. 2016. 大国大城. 上海 : 上海人民出版社, 2016.</li>
<li>国务院关于广州市城市总体规划的批复. 国务院. [联机] 2016年2月. <a target="_blank" rel="noopener" href="http://www.gov.cn/zhengce/content/2016-02/19/content_5043501.htm">http://www.gov.cn/zhengce/content/2016-02/19/content_5043501.htm</a></li>
<li>国务院关于天津市城市总体规划的批复. 国务院. [联机] 2008年3月. <a target="_blank" rel="noopener" href="http://www.gov.cn/zhengce/content/2008-03/28/content_5542.htm">http://www.gov.cn/zhengce/content/2008-03/28/content_5542.htm</a></li>
<li>国务院关于重庆市城乡总体规划的批复. 国务院. [联机] 2011年10月. <a target="_blank" rel="noopener" href="http://www.gov.cn/zhengce/content/2011-10/18/content_5243.htm">http://www.gov.cn/zhengce/content/2011-10/18/content_5243.htm</a></li>
<li>国务院关于成都市城市总体规划的批复. 国务院. [联机] 2015年12月. <a target="_blank" rel="noopener" href="http://www.gov.cn/zhengce/content/2015-12/04/content_10384.htm">http://www.gov.cn/zhengce/content/2015-12/04/content_10384.htm</a></li>
<li>国务院关于武汉市城市总体规划的批复. 国务院. [联机] 2010年3月. <a target="_blank" rel="noopener" href="http://www.gov.cn/zhengce/content/2010-03/10/content_5388.htm">http://www.gov.cn/zhengce/content/2010-03/10/content_5388.htm</a></li>
<li>国务院关于西安市城市总体规划的批复. 国务院. [联机] 2008年12月. <a target="_blank" rel="noopener" href="http://www.gov.cn/zhengce/content/2008-05/12/content_5443.htm">http://www.gov.cn/zhengce/content/2008-05/12/content_5443.htm</a></li>
<li>国务院关于郑州市城市总体规划的批复. 国务院. [联机] 2010年8月. <a target="_blank" rel="noopener" href="http://www.gov.cn/zhengce/content/2010-08/23/content_5368.htm">http://www.gov.cn/zhengce/content/2010-08/23/content_5368.htm</a></li>
<li>改革开放以来我国城镇化水平显著提高. 新华社. [联机] 2018年9月. <a target="_blank" rel="noopener" href="http://www.xinhuanet.com/2018-09/10/c_1123408567.htm">http://www.xinhuanet.com/2018-09/10/c_1123408567.htm</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://blog.dujiajun.site/2018/11/23/cin-%E4%B8%8Ecin-getline-%E6%B7%B7%E7%94%A8%E6%97%B6%E7%9A%84%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="杜某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一无是处杜某某">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 一无是处杜某某">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/11/23/cin-%E4%B8%8Ecin-getline-%E6%B7%B7%E7%94%A8%E6%97%B6%E7%9A%84%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">cin>>与cin.getline()混用时的问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-11-23 13:44:41" itemprop="dateCreated datePublished" datetime="2018-11-23T13:44:41+08:00">2018-11-23</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>很多时候我们会遇到这样一种情景，第一行读入一个整数<code>n</code>，第二行输入一行字符串<code>str</code>。</p>
<p>大家会自然地写出如下代码：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">char</span> str[<span class="number">80</span>], str2[<span class="number">80</span>];</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;Input an integer:&quot;</span>;</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;Input a string:&quot;</span>;</span><br><span class="line">cin.<span class="built_in">getline</span>(str, <span class="number">80</span>);</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;End of Input!&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>但是当运行在控制台的时候，我们先输入一个整数，然后回车，然后试图输入一行字符串，会发现第二行字符串没有被输入。当我们检查到底输入了什么的时候，发现<code>str</code>为空字符串。</p>
<p>控制台显示内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input an integer:5</span><br><span class="line">Input a string:End of Input!</span><br></pre></td></tr></table></figure>

<h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><p><code>cin&gt;&gt;</code>的工作方式为，根据<code>&gt;&gt;</code>后面的数据类型读取数据，从非空白字符开始，遇到回车<code>&#39;\n&#39;</code>、空格<code>&#39; &#39;</code>、制表符<code>&#39;\t&#39;</code>等时结束。结束时将这些空白字符保留在输入流中。</p>
<p><code>cin.getline()</code>的工作方式为，从输入流读取一行数据，遇到<code>&#39;\n&#39;</code>结束。结束时不在输入流中保留<code>&#39;\n&#39;</code></p>
<p>在上面的代码和输入中，我们输入<code>5</code>之后按了一下回车，通过判断回车判断对<code>n</code>输入结束。这种情况下，<code>cin</code>不会删除输入流中的<code>&#39;\n&#39;</code>，换行符将被留在输入流里面。接下来就被<code>cin.getline()</code>读入，其判断输入为换行符，结束本行输入，因而<code>str</code>为空。</p>
<h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p>在<code>cin&gt;&gt;</code>与<code>cin.getline()</code>之间把这个换行符从输入流清除即可。</p>
<p>可以使用<code>cin.ignore();</code>忽略这个换行符，也可以使用<code>cin.get();</code>将这个换行符读入。</p>
<p>于是修改后的代码为：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">char</span> str[<span class="number">80</span>], str2[<span class="number">80</span>];</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;Input an integer:&quot;</span>;</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line">cin.<span class="built_in">ignore</span>();</span><br><span class="line"><span class="comment">// 或者 cin.get();</span></span><br><span class="line">cout&lt;&lt;<span class="string">&quot;Input a string:&quot;</span>;</span><br><span class="line">cin.<span class="built_in">getline</span>(str, <span class="number">80</span>);</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;End of Input!&quot;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h2><p><code>cin.get()</code>也能输入一行字符串，这种场景的调用方式和<code>cin.getline()</code>一模一样，只是把<code>getline</code>改成了<code>get</code>，如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cin.get(str,80);</span><br></pre></td></tr></table></figure>

<p>那么它和<code>cin.getline()</code>有什么区别呢？</p>
<p><code>cin.get</code><strong>在这种用法下</strong>将输入本行时最后的换行符保留在了输入流中，而<code>cin.getline()</code>不保留换行符。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://blog.dujiajun.site/2018/11/01/MIX2S%E7%9A%84%E7%AC%AC%E4%B8%80%E5%A4%A9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="杜某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一无是处杜某某">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 一无是处杜某某">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/11/01/MIX2S%E7%9A%84%E7%AC%AC%E4%B8%80%E5%A4%A9/" class="post-title-link" itemprop="url">MIX2S的第一天</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-11-01 14:43:05" itemprop="dateCreated datePublished" datetime="2018-11-01T14:43:05+08:00">2018-11-01</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>优点不多说：非刘海的全面屏，骁龙845，101分的拍照，很舒服的陶瓷质感，关注的人都知道。</p>
<p>缺点主要有这几项，不妨一项一项来说。</p>
<p>后置指纹与竖排双摄。这个就见仁见智了，每个人想法可能不一样。<br>前置摄像头位置。对于我这种从来不自拍的，其实没有影响，不过视频聊天可能会影响。<br>大且沉。180+g的重量和6寸的屏幕，确实比我之前用的Pro6大。不过，全面屏加持下的6寸MIX2S仅比Pro6大不到一圈，重量比Pro6重一个手机壳的重量，能接受。<br>没有3.5mm耳机接口。这个常用的耳机接口突然就没了，撂谁都觉得不适应。<br>LCD屏幕。这个不算缺点，如果从OLED屏幕换成LCD屏幕</p>
<p>作为魅族的老用户，Flyme用久了换到MIUI确实还有一些不适应，在这里详细列出，如果是我不会用，请指教。</p>
<p>mBack。这个好用的一比，谁用谁知道。<br>没有上划解锁。只有双击解锁没有上划手势解锁，对我确实不习惯。<br>悬浮球。Flyme的悬浮球比MIUI的好用多了。切换最近应用，回到桌面，下拉悬停。<br>截图。我甚至连MIX2S截图按哪个键都不知道，别说通知栏和悬浮球。长截图要抢节拍不如Flyme慢慢自己调好用。<br>输入法。请问如何在中文输入模式，不切换中英文的情况下，快速打出大小写混杂的英文单词？</p>
<p>最后就是一点感慨。</p>
<p>我从小米1开始认识小米到现在已经7年了，买了一大堆小米的东西但都只是小米周边，核心的手机平板电视，今天之前一个都没买。<br>这都2018年了，雷军亲自抓供应链的事情都过去2年了，小米之家在全国也已经铺开了几百家。我下午2点打了个电话去预定了一台，3点多去就直接拿到手。轻松便捷，不需要在网上抢购。现在买手机还是更多回归线下了，新零售体验远比抢购来的爽。<br>中国国产手机从中华酷联，到百花齐放，到现在的华米OV。曾经性价比极高的乐视现在成什么样了，曾经好口碑的一加现在也不讲究了，曾经有了起色的魅族还能跟上行业的浪潮吗？360，努比亚和锤子都成为了一众小厂。对我而言，选择似乎是越来越少了。手机发展进入平缓期，当我觉得没有哪款手机吸引我的时候，全国手机销量增速也正好暴跌。<br>中学6年我换了6部手机，或多或少都是质量问题或者严重跟不上时代了。而大学以来Pro6用了22个月，仅仅是电池和闪存不足。<br>最早明年5G就要商用了，而我现在就换机了，这也许是我4G时代的最后一款手机吧。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://blog.dujiajun.site/2018/11/01/%E8%80%81%E5%9F%8E%E9%97%A8%E6%B4%9E%E7%81%AB%E9%94%85%EF%BC%9A%E9%87%8D%E5%BA%86%E8%80%81%E7%81%AB%E9%94%85%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E6%83%B3%E8%B1%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="杜某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一无是处杜某某">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 一无是处杜某某">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/11/01/%E8%80%81%E5%9F%8E%E9%97%A8%E6%B4%9E%E7%81%AB%E9%94%85%EF%BC%9A%E9%87%8D%E5%BA%86%E8%80%81%E7%81%AB%E9%94%85%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E6%83%B3%E8%B1%A1/" class="post-title-link" itemprop="url">老城门洞火锅：重庆老火锅的另一种想象</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-11-01 14:39:49" itemprop="dateCreated datePublished" datetime="2018-11-01T14:39:49+08:00">2018-11-01</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <img src="/2018/11/01/%E8%80%81%E5%9F%8E%E9%97%A8%E6%B4%9E%E7%81%AB%E9%94%85%EF%BC%9A%E9%87%8D%E5%BA%86%E8%80%81%E7%81%AB%E9%94%85%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E6%83%B3%E8%B1%A1/1.png" class="">
<p>去智博会的路上，我爸说晚上一定要去吃这家火锅，而且发给了我一篇推文。</p>
<p>老城门洞火锅位于渝中区罗汉寺附近的筷子街，已经开了三十余年。老板和他的兄弟是据说重庆第一家国营火锅的锅底掌勺，国营火锅店倒闭后出来兄弟单干。老板是老大，因此也被称作“老大老火锅”。</p>
<p>智博会回来，由于堵车，我们7点半才到了火锅店。路上的时候就在说，这家火锅店脾气怪，下午5点半开门，7点半以后不接客，晚上9点关门，没吃完的话老板要赶客。之前我爸很想加盟这家店，未果。</p>
<img src="/2018/11/01/%E8%80%81%E5%9F%8E%E9%97%A8%E6%B4%9E%E7%81%AB%E9%94%85%EF%BC%9A%E9%87%8D%E5%BA%86%E8%80%81%E7%81%AB%E9%94%85%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E6%83%B3%E8%B1%A1/2.png" class="">
<p>这家店进门之后就能看出，店面老破小，昏暗的光线与随处可见的油污。换做是外地的或者讲究环境的食客，看到这副景象便没了胃口。不过对于我们这种吃味道而不是吃服务的人来说，这都是不存在的。</p>
<img src="/2018/11/01/%E8%80%81%E5%9F%8E%E9%97%A8%E6%B4%9E%E7%81%AB%E9%94%85%EF%BC%9A%E9%87%8D%E5%BA%86%E8%80%81%E7%81%AB%E9%94%85%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E6%83%B3%E8%B1%A1/3.png" class="">
<img src="/2018/11/01/%E8%80%81%E5%9F%8E%E9%97%A8%E6%B4%9E%E7%81%AB%E9%94%85%EF%BC%9A%E9%87%8D%E5%BA%86%E8%80%81%E7%81%AB%E9%94%85%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E6%83%B3%E8%B1%A1/4.png" class="">
<p>这家店是标标准准的老火锅。老火锅用老油是很正常的事情，这家店一看也就是老油。和其他老火锅相比，这家店的锅底真的是特别黑，一种潲水黑的感觉。菜品也特别少，毕竟不卖混汤的菜。</p>
<img src="/2018/11/01/%E8%80%81%E5%9F%8E%E9%97%A8%E6%B4%9E%E7%81%AB%E9%94%85%EF%BC%9A%E9%87%8D%E5%BA%86%E8%80%81%E7%81%AB%E9%94%85%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E6%83%B3%E8%B1%A1/5.png" class="">
<img src="/2018/11/01/%E8%80%81%E5%9F%8E%E9%97%A8%E6%B4%9E%E7%81%AB%E9%94%85%EF%BC%9A%E9%87%8D%E5%BA%86%E8%80%81%E7%81%AB%E9%94%85%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E6%83%B3%E8%B1%A1/6.png" class="">
<p>看到这个层面上了，精致的食客可能也不会选择它。但是这火锅神奇之处就在于锅底。</p>
<p>我之前曾经批评过外地的所谓重庆火锅，既不辣也不香，完全没有味道。前几天又批评大队长火锅，味道太单薄而只有辣不香。</p>
<img src="/2018/11/01/%E8%80%81%E5%9F%8E%E9%97%A8%E6%B4%9E%E7%81%AB%E9%94%85%EF%BC%9A%E9%87%8D%E5%BA%86%E8%80%81%E7%81%AB%E9%94%85%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E6%83%B3%E8%B1%A1/7.png" class="">
<p>这家火锅，油面上飘浮着几个辣椒，吃着第一印象也是不辣。但是仔细平常就发现，虽然不辣，但是味道特别香，就是我之前经常提到的浑厚感，回味起来还有一股甜味。煮了半个小时之后，味道慢慢打开，辣味和咸味就慢慢提上来，形成了不是特别辣的复合型麻辣鲜香口感。</p>
<img src="/2018/11/01/%E8%80%81%E5%9F%8E%E9%97%A8%E6%B4%9E%E7%81%AB%E9%94%85%EF%BC%9A%E9%87%8D%E5%BA%86%E8%80%81%E7%81%AB%E9%94%85%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E6%83%B3%E8%B1%A1/8.png" class="">
<p>菜品是不是新鲜我吃不出来，不过种类是真的少。结账的时候发现老板只收现金，因此还特意出门取了现金。</p>
<p>吃的时候我就在和我爸及他的朋友聊到。海底捞就是服务的极端，但是其辣锅的味道是重庆人不能接受的。这些火锅店则是另外一个极端，味道好，但是服务、环境特别差。大人们也许吃的是情怀和回忆，现在像我们这种年轻人也许对于服务、环境、菜品拼盘等的重视度大大提高，这种老店也许不久之后便会被历史淘汰 。</p>
<p>下午7点半的网红佩姐火锅门庭若市，排队能排到凌晨，而同一时间的老城门洞火锅店内只有4桌人。老城门洞火锅店内的装潢看着已经十余年没有装修过了，当年想必也是风风火火，如今看上去则很显简陋。我们可以说老板是坚守传统，但坚守传统便意味着跟不上时代前进的脚步。</p>
<p>我的口吻当然是不喜欢这种近乎墨守陈规的传统，但是我也非常不希望这种传统在网红重庆的嘈杂中逐渐消逝。有兴趣的不妨前去体验一番。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://blog.dujiajun.site/2018/10/18/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E7%A7%91%E6%8A%80%E5%88%9B%E6%96%B0%E4%BD%9C%E4%B8%9A%E4%B9%8B%E7%BC%96%E5%86%99iptables%E8%A7%84%E5%88%99/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="杜某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一无是处杜某某">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 一无是处杜某某">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/10/18/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E7%A7%91%E6%8A%80%E5%88%9B%E6%96%B0%E4%BD%9C%E4%B8%9A%E4%B9%8B%E7%BC%96%E5%86%99iptables%E8%A7%84%E5%88%99/" class="post-title-link" itemprop="url">信息安全科技创新作业之编写iptables规则</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-10-18 13:54:58" itemprop="dateCreated datePublished" datetime="2018-10-18T13:54:58+08:00">2018-10-18</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>本文为信息安全科技创新课程作业</p>
</blockquote>
<p>对于保护单个主机的人防火墙，其连接Internet的接口为<code>eth0</code>，假定 ftp服务为port模式，请给出以下安全策略相应的iptables命令：</p>
<p>1）将一条规则放在 INPUT 链首，允许所有从任何地方到本地telnet 端口的连接 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -t filter -I INPUT -p tcp --dport telnet -j ACCEPT</span><br></pre></td></tr></table></figure>
<p>2）将一条规则附加到 INPUT 链的末尾，确定来自源地址 <code>205.168.0.0/24</code> 的信息包可以 ACCEPT</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -t filter -A INPUT -s 205.168.0.0/24 -j ACCEPT</span><br></pre></td></tr></table></figure>
<p>3）更改所有离开 <code>eth0</code> 接口数据包的源地址为<code>1.2.3.4</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -t nat -A POSTROUTING -o eth0 -j SNAT --to 1.2.3.4</span><br></pre></td></tr></table></figure>
<p>4）更改源IP为<code>202.127.14.61</code>，进入 <code>eth0</code> 接口数据包的目地址为<code>1.2.4.4</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -t nat -A PREROUTING -s 202.127.14.61 -i eth0 -j DNAT --to 1.2.4.4</span><br></pre></td></tr></table></figure>
<p>5）将所有来自外网的ftp访问数据流重定向到<code>1.2.4.4:1008</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -t nat -A PREROUTING -i eth0 -p tcp --dport ftp -j DNAT --to 1.2.4.4:1008</span><br></pre></td></tr></table></figure>
<p>6）本机对外开放 FTP 服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">iptables -t filter -A INPUT -p tcp --dport ftp -j ACCEPT</span><br><span class="line">iptables -t filter -A OUTPUT -p tcp --dport ftp -j ACCEPT</span><br><span class="line">iptables -t filter -A INPUT -p tcp --sport ftp -j ACCEPT</span><br><span class="line">iptables -t filter -A OUTPUT -p tcp --sport ftp -j ACCEPT</span><br></pre></td></tr></table></figure>
<p>7）在filter表的 INPUT链的最后追加一条规则，丢弃通过<code>eth0</code>传入的序号为8的icmp协议数据包，即ping request，以实现其他主机不能成功的ping通本机</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -t filter -A INPUT -i eth0 -p icmp --icmp-type 8 -j DROP</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&gt; iptables -L -t filter</span><br><span class="line"></span><br><span class="line">Chain INPUT (policy ACCEPT)</span><br><span class="line">target prot opt source destination </span><br><span class="line">ACCEPT tcp -- anywhere anywhere tcp dpt:telnet</span><br><span class="line">ACCEPT all -- 205.168.0.0/24 anywhere </span><br><span class="line">ACCEPT tcp -- anywhere anywhere tcp dpt:ftp</span><br><span class="line">ACCEPT tcp -- anywhere anywhere tcp spt:ftp</span><br><span class="line">DROP icmp -- anywhere anywhere icmp echo-request</span><br><span class="line"></span><br><span class="line">Chain FORWARD (policy ACCEPT)</span><br><span class="line">target prot opt source destination </span><br><span class="line"></span><br><span class="line">Chain OUTPUT (policy ACCEPT)</span><br><span class="line">target prot opt source destination </span><br><span class="line">ACCEPT tcp -- anywhere anywhere tcp dpt:ftp</span><br><span class="line">ACCEPT tcp -- anywhere anywhere tcp spt:ftp</span><br><span class="line"></span><br><span class="line">iptables -L -t nat</span><br><span class="line">Chain PREROUTING (policy ACCEPT)</span><br><span class="line">target prot opt source destination </span><br><span class="line">DNAT all -- 202.127.14.61 anywhere to:1.2.4.4</span><br><span class="line">DNAT tcp -- anywhere anywhere tcp dpt:ftp to:1.2.4.4:1008</span><br><span class="line"></span><br><span class="line">Chain INPUT (policy ACCEPT)</span><br><span class="line">target prot opt source destination </span><br><span class="line"></span><br><span class="line">Chain OUTPUT (policy ACCEPT)</span><br><span class="line">target prot opt source destination </span><br><span class="line"></span><br><span class="line">Chain POSTROUTING (policy ACCEPT)</span><br><span class="line">target prot opt source destination </span><br><span class="line">SNAT all -- anywhere anywhere to:1.2.3.4</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://blog.dujiajun.site/2018/09/11/%E5%81%87%E6%9C%9F%E8%A7%81%E9%97%BB%E4%B9%8B%E7%BD%91%E7%BA%A2%E5%9F%8E%E5%B8%82%E7%9A%84%E4%BF%9D%E9%B2%9C%E4%B9%8B%E8%B7%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="杜某某">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一无是处杜某某">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 一无是处杜某某">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/09/11/%E5%81%87%E6%9C%9F%E8%A7%81%E9%97%BB%E4%B9%8B%E7%BD%91%E7%BA%A2%E5%9F%8E%E5%B8%82%E7%9A%84%E4%BF%9D%E9%B2%9C%E4%B9%8B%E8%B7%AF/" class="post-title-link" itemprop="url">假期见闻之网红城市的保鲜之路</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-09-11 14:17:55" itemprop="dateCreated datePublished" datetime="2018-09-11T14:17:55+08:00">2018-09-11</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>2018年的暑假，对于我来说是很忙碌的一个暑假，在短短的一个月时间内，我先后涉及到学车，社会实践，参观智博会等一系列事情。以下假期见闻就着重谈一下社会实践的话题吧。</p>
<p>我作为重庆人，对家乡的发展自然很关心，经常关注地方新闻媒体与各种地方论坛。为了维护良好的城市形象，我们在外担当家乡的名片，我们在内当好东道主迎接四方客。旅游就是重要的城市门面，旅游体验会很影响外地游客对重庆的评价。</p>
<p>虽然说重庆也是传统的热门旅游目的地，但是以往通常是“红色之旅”“三峡游”等旅游路线。近几年发现由于独特地形和城市景观, 重庆都市旅游在微博等互联网平台上逐渐火热起来，重庆逐渐成为了“网红”。特别是今年以来，重庆在抖音上突然爆红，有一段时间连着十条都是重庆洪崖洞，吸引了大量外地游客。这样突然的爆红直接导致了今年5月1日重庆洪崖洞、长江索道等景区出现严重拥堵爆满，接待能力严重不足等情况。看到这个新闻之后，我便有了一个社会实践调研的想法，即调研重庆都市旅游的现状和未来的发展。正如这个实践的名字一样，网红虽然红，但大多是短期的，如何将网红“保鲜”，转化为长期发展动力，这是一个重要命题。</p>
<p>在假期中，我们的实践对四个景点进行了调研，分别是：交通工具的华丽转身——长江索道，游客量爆棚的热门打卡地——洪崖洞，应对爆炸客流的千年古镇——磁器口，以及老工厂转型的文创园区——鹅岭二厂。此外，为了从官方的角度思考，我们还与重庆市旅游发展委员会的工作人员进行沟通，获得了一些更专业的概念与信息。</p>
<p>在实践前我不断地在关注重庆都市旅游提质升级的新闻，的确从五一假期结束后到实践前的时间内，重庆做出了许多动作，比如旅游专线、限流措施、精品线路展示、网络购票与预约等内容。即便如此，在实践中我们发现重庆都市旅游确实存在许多粗放式发展的不足。比如说长江索道的排队体验太差，洪崖洞的休息地点太少，磁器口的商品过于雷同，鹅岭二厂的导览提示不足等等。</p>
<p>在与重庆市旅发委的沟通中，我们了解到，市委市政府高度重视都市旅游发展，在五一小长假结束之后市领导便进行了相关调研，并在之后的时间内拿出了许多提质升级方案。旅游是高度市场化的行为。因此，此次重庆变为“网红”而爆红，是一次市场选择的过程。游客们喜欢去哪个景点是市场的选择，我们就不应该拦着游客。旅发委提供了很多旅游建议，而具体的旅游线路则是由旅行社或者旅行网站APP等提供。</p>
<p>作为即将大三的“老油条”，在过去的每个假期我都有自己立项或者参加其他社会实践项目。从回访母校到助飞计划再到十九大宣讲，从走访贫困户与调研脱贫工作到地方文化的传承与发展调研，我经历过不同类型不同形式的实践，也有着自己的一些经验和教训。在本次实践中，我们的主要形式为实地评估、派发问卷与视频采访。很多成员都是大一的学弟学妹，也是自己的好朋友，虽然他们报名这个项目的原因很多是出于方便或者人情，但也都非常负责地完成了分工安排中的任务，在此表示感谢。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">杜某某</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
